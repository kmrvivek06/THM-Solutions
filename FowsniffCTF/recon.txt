IP : 10.10.23.42

Open Ports : 22-SSH,80-WEB,110-POP3,143-IMAP


Web Enum :

	Website down, information about data breach.
	Found a twitter handle :
		Found credentials : dumped

	Crack the md5 hashes with john

Use metasploit > auxilary/scanner/pop3/pop3_login to brute 110 service.

Found pop3 account : seina:scoobydoo2

Lets check that out

We can use nc to do that :
	nc 10.10.23.42 110
	USER seina
	PASS scoobydoo2
		LOGIN SUCCESS
	LIST
	RETR 1 (To retrive 1st mail)

+OK 1622 octets
Return-Path: <stone@fowsniff>
X-Original-To: seina@fowsniff
Delivered-To: seina@fowsniff
Received: by fowsniff (Postfix, from userid 1000)
        id 0FA3916A; Tue, 13 Mar 2018 14:51:07 -0400 (EDT)
To: baksteen@fowsniff, mauer@fowsniff, mursten@fowsniff,
    mustikka@fowsniff, parede@fowsniff, sciana@fowsniff, seina@fowsniff,
    tegel@fowsniff
Subject: URGENT! Security EVENT!
Message-Id: <20180313185107.0FA3916A@fowsniff>
Date: Tue, 13 Mar 2018 14:51:07 -0400 (EDT)
From: stone@fowsniff (stone)

Dear All,

A few days ago, a malicious actor was able to gain entry to
our internal email systems. The attacker was able to exploit
incorrectly filtered escape characters within our SQL database
to access our login credentials. Both the SQL and authentication
system used legacy methods that had not been updated in some time.

We have been instructed to perform a complete internal system
overhaul. While the main systems are "in the shop," we have
moved to this isolated, temporary server that has minimal
functionality.

This server is capable of sending and receiving emails, but only
locally. That means you can only send emails to other users, not
to the world wide web. You can, however, access this system via 
the SSH protocol.

The temporary password for SSH is "S1ck3nBluff+secureshell"

You MUST change this password as soon as possible, and you will do so under my
guidance. I saw the leak the attacker posted online, and I must say that your
passwords were not very secure.

Come see me in my office at your earliest convenience and we'll set it up.

Thanks,
A.J Stone

We found the temporary password : S1ck3nBluff+secureshell

We also have another mail sent from : baksteen

Lets verify user account for ssh via hydra : 

Confirmed user_name : baksteen

Lets use this to ssh:

Lets search for file we can edit us pare of user's group.

	/opt/cube/cube.sh

Lets check this out.

It displays a banner, and is called when we login to SSH.

Add a reverse shell in the file.

Setup a listener, logout and login again... We will receive a root shell.


!!!
